document.addEventListener("DOMContentLoaded",()=>{initScrollbar(document.querySelector(".student-dashboard .trending-section .scroll-container"));initScrollbar(document.querySelector(".student-dashboard .specialization-trainings-section .scroll-container"));fetchSection("/student/dashboard_section/todo",onFetchTodoSectionSuccess);fetchSection("/student/dashboard_section/internships_jobs",onFetchInternshipsJobsSuccess);fetchSection("/student/trainings_ad_dashboard/dashboard",onFetchReccomendedCertificationSuccess)});
function fetchSection(b,a){NProgress.start();$(".loading_image").show();$.ajax(b,{success:a,error:onError,method:"POST"})}
function onFetchTodoSectionSuccess(b){try{NProgress.done();$(".loading_image").hide();if(!b.success)return throw_error(b.errorThrown);if(b.todo_view){var a=document.getElementById("todo-list-section");a.innerHTML=b.todo_view;var e=a.querySelector(".todo-list-section .todo-list-container"),d=e.querySelectorAll(".todo-tile.hidden"),c=e.querySelector(".show-all");c&&c.addEventListener("click",()=>{d.forEach(f=>f.classList.remove("hidden"));c.remove()})}}catch(f){throw_error(f),NProgress.done(),$(".loading_image").hide()}}
function onFetchInternshipsJobsSuccess(b){try{NProgress.done();$(".loading_image").hide();if(!b.success)return throw_error(b.errorThrown);b.internships_jobs_view&&(document.getElementById("internships-jobs-section").innerHTML=b.internships_jobs_view,Array.from(document.querySelectorAll("#internships-jobs-section .internships-jobs-section .scroll-container")).forEach(a=>{initScrollbar(a)}))}catch(a){throw_error(a),NProgress.done(),$(".loading_image").hide()}}
function onFetchReccomendedCertificationSuccess(b){try{NProgress.done();$(".loading_image").hide();if(!b.success)return throw_error(b.errorThrown);if(b.view){var a=document.getElementById("certification-trainings-section");a.innerHTML=b.view;initScrollbar(a.querySelector(".certification-trainings-section .scroll-container"))}}catch(e){throw_error(e),NProgress.done(),$(".loading_image").hide()}}
const initScrollbar=b=>{if(b){var a=0,e=b.querySelector(".scroll-controller"),d=b.querySelector(".scroll"),c=d.querySelectorAll(".card");if(d.clientWidth>=d.scrollWidth-1)d.classList.add("no-scroll");else return e.style.display="flex",e.querySelector(".track .thumb").style.width=`${100*d.clientWidth/d.scrollWidth}%`,d.addEventListener("scroll",f=>{e.querySelector(".track .thumb").style.left=`${100*d.scrollLeft/d.scrollWidth}%`;0===d.scrollLeft?e.querySelector(".arrow.prev").classList.add("disabled"):
d.scrollLeft+d.clientWidth>=d.scrollWidth-1?e.querySelector(".arrow.next").classList.add("disabled"):(e.querySelector(".arrow.prev").classList.remove("disabled"),e.querySelector(".arrow.next").classList.remove("disabled"))}),e.querySelector(".arrow.next").addEventListener("click",f=>{f.currentTarget.classList.contains("disabled")||(c[a+1]?(a++,c[a].scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})):c[c.length-1].scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}))}),
e.querySelector(".arrow.prev").addEventListener("click",f=>{f.currentTarget.classList.contains("disabled")||(c[a-1]?(a--,c[a].scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})):c[0].scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}))}),()=>{a=0;c[0].scrollIntoView({block:"nearest",inline:"start"})}}};var to_show_connect_nudge=1;$(document).ready(function(){load_connect_recommendations()});
function load_connect_recommendations(){NProgress.start();$(".loading_image").show();$.ajax("/connect/fetch_recommendations",{success:load_connect_recommendations_success,error:onError,type:"POST"})}
var load_connect_recommendations_success=function(b){try{if(NProgress.done(),$(".loading_image").hide(),b.success&&0<b.total_categories_recommended){const a=document.getElementById("student_connect_section");a.innerHTML=b.recommendations_view;const e=a.querySelectorAll(".scroll-container"),d=a.querySelectorAll(".categories .category-capsule");d.forEach((c,f)=>{c.addEventListener("click",h=>{d.forEach(g=>g.classList.remove("active"));e.forEach(g=>g.style.display="none");c.classList.add("active");e[f].style.display=
"block";const k=initScrollbar(e[f]);h.pointerType&&k()})});$(a).on("click",".card > a",c=>{c.preventDefault();if(c.target.classList.contains("connect-cta"))return window.location=c.target.getAttribute("link"),!1;window.location=c.currentTarget.getAttribute("href");return!1});d[0].dispatchEvent(new Event("click"))}}catch(a){throw_error(a),NProgress.done(),$(".loading_image").hide()}};
